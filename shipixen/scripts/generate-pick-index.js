const fs = require('fs');
const path = require('path');

const picksDir = path.join(__dirname, '../data/picks');
const outputFilePath = path.join(__dirname, '../data/picks/index.js');

const generateIndex = () => {
  console.log('\n[Generate Pick Index] üöÄ Starting pick index generation...');
  const startTime = Date.now();

  console.log(`[Generate Pick Index] üìÅ Reading picks from: ${picksDir}`);

  const files = fs
    .readdirSync(picksDir)
    .filter((file) => file.endsWith('.js') && file !== 'index.js');

  console.log(`[Generate Pick Index] üìã Found ${files.length} pick files`);

  const indexContent = `
    // This file is auto-generated by scripts/generateIndex.js
    export const picksIndex = ${JSON.stringify(files, null, 2)};
  `;

  fs.writeFileSync(outputFilePath, indexContent.trim());

  const elapsed = Date.now() - startTime;
  console.log(`[Generate Pick Index] ‚úÖ Index file written to: ${outputFilePath}`);
  console.log(`[Generate Pick Index] ‚è±Ô∏è  Total time: ${elapsed}ms\n`);
};

generateIndex();
